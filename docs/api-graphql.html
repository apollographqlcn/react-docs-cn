<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>API: graphql container | Apollo React Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://apollographqlcn.github.io/react-docs-cn">
    <meta property="og:title" content="API: graphql container | Apollo React Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@apollographqlcn">
    <meta name="twitter:title" content="API: graphql container | Apollo React Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/react-docs-cn/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      
      <a class="logo-wrapper" href="http://dev.apollodata.com/" title="Apollo Developers"  >
        <img src="images/logo-apollo-space-left.svg" alt="Apollo" class="logo"/><img src="images/logo-apollo-subbrands-developers-space.svg" class="logo-subbrand" alt="Developers"/>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false separator">
        <a class="link" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http:/dev.apollodata.com/" title="Apollo"  >
        <span>Apollo Developers</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo React Docs</span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search React Guide" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="initialization.html" class="sidebar-link ">
                  <span>Setup and options</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="simple-example.html" class="sidebar-link ">
                  <span>Small Example: Snack</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-schema.html" class="sidebar-link ">
                  <span>Full Example: GitHunt</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="migration.html" class="sidebar-link ">
                  <span>Migrating to 1.0</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Usage</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="queries.html" class="sidebar-link ">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="receiving-updates.html" class="sidebar-link ">
                  <span>Syncing with the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="cache-updates.html" class="sidebar-link ">
                  <span>Updating the Store</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">API Reference</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="api.html" class="sidebar-link ">
                  <span>General</span>
                </a>
              </li>
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>graphql: Container</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-queries.html" class="sidebar-link ">
                  <span>graphql: Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-mutations.html" class="sidebar-link ">
                  <span>graphql: Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-server.html" class="sidebar-link ">
                  <span>Server Side Rendering</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Recipes</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="auth.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Using Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="prefetching.html" class="sidebar-link ">
                  <span>Prefetching data</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="redux.html" class="sidebar-link ">
                  <span>Integrating with Redux</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="webpack.html" class="sidebar-link ">
                  <span>Webpack loader</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-side-rendering.html" class="sidebar-link ">
                  <span>Server Side Rendering</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">API: graphql container</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/apollographqlcn/react-docs-cn/tree/master/source/api-graphql.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <h2 id="graphql" title="graphql(...)"><code>graphql(query, [config])(component)</code></h2>

<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; graphql &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span>;</div></pre></td></tr></table></figure>
<p>The <code>graphql()</code> function is the most important thing exported by <code>react-apollo</code>. With this function you can create higher-order components that can execute queries and update reactively based on the data in your Apollo store. The <code>graphql()</code> function returns a function which will “enhance” any component with reactive GraphQL capabilities. This follows the React <a href="https://facebook.github.io/react/docs/higher-order-components.html" target="_blank" rel="external">higher-order component</a> pattern which is also used by <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" target="_blank" rel="external"><code>react-redux</code>’s <code>connect</code></a> function.</p>
<p>The <code>graphql()</code> function may be used like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoApp</span>(<span class="params">&#123; data: &#123; todos &#125; &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;ul&gt;</div><div class="line">      &#123;todos.map((&#123; id, text &#125;) =&gt; (</div><div class="line">        &lt;li key=&#123;id&#125;&gt;&#123;text&#125;&lt;/li&gt;</div><div class="line">      ))&#125;</div><div class="line">    &lt;/ul&gt;</div><div class="line">  );</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(gql<span class="string">`</span></div><div class="line">  query TodoAppQuery &#123;</div><div class="line">    todos &#123;</div><div class="line">      id</div><div class="line">      text</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`)(TodoApp);</div></pre></td></tr></table></figure>
<p>You may also define an intermediate function and hook up your component with the <code>graphql()</code> function like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Create our enhancer function.</span></div><div class="line"><span class="keyword">const</span> withTodoAppQuery = graphql(gql<span class="string">`query &#123; ... &#125;`</span>);</div><div class="line"></div><div class="line"><span class="comment">// Enhance our component.</span></div><div class="line"><span class="keyword">const</span> TodoAppWithData = withTodoAppQuery(TodoApp);</div><div class="line"></div><div class="line"><span class="comment">// Export the enhanced component.</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoAppWithData;</div></pre></td></tr></table></figure>
<p>Alternatively, you can also use the <code>graphql()</code> function as a <a href="https://github.com/wycats/javascript-decorators" target="_blank" rel="external">decorator</a> on your React class component.</p>
<p>If so your code may look like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">@graphql(gql<span class="string">`</span></div><div class="line">  query TodoAppQuery &#123;</div><div class="line">    todos &#123;</div><div class="line">      id</div><div class="line">      text</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: &#123; todos &#125; &#125; = <span class="keyword">this</span>.props;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;ul&gt;</div><div class="line">        &#123;todos.map((&#123; id, text &#125;) =&gt; (</div><div class="line">          &lt;li key=&#123;id&#125;&gt;&#123;text&#125;&lt;/li&gt;</div><div class="line">        ))&#125;</div><div class="line">      &lt;/ul&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>graphql()</code> function will only be able to provide access to your GraphQL data if there is a <a href="#ApolloProvider"><code>&lt;ApolloProvider/&gt;</code></a> component higher up in your tree to provide an <a href="../core/apollo-client-api.html#apollo-client"><code>ApolloClient</code></a> instance that will be used to fetch your data.</p>
<p>The behavior of your component enhanced with the <code>graphql()</code> function will be different depending on if your GraphQL operation is a <a href="#queries">query</a>, a <a href="#mutations">mutation</a>, or a <a href="#subscriptions">subscription</a>. Go to the appropriate API documentation for more information about the functionality and available options for each type.</p>
<p>Before we look into the specific behaviors of each operation, let us look at the <code>config</code> object.</p>
<h2 id="graphql-config"><code>config</code></h2>

<p>The <code>config</code> object is the second argument you pass into the <code>graphql()</code> function, after your GraphQL document. The config is optional and allows you to add some custom behavior to your higher order component.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(</div><div class="line">  gql<span class="string">`&#123; ... &#125;`</span>,</div><div class="line">  config, <span class="comment">// &lt;- The `config` object.</span></div><div class="line">)(MyComponent);</div></pre></td></tr></table></figure>
<p>Lets go through all of the properties that may live on your <code>config</code> object.</p>
<h3 id="graphql-config-options"><code>config.options</code></h3>

<p><code>config.options</code> is an object or a function that allows you to define the specific behavior your component should use in handling your GraphQL data.</p>
<p>The specific options available for configuration depend on the operation you pass as the first argument to <code>graphql()</code>. There are options specific to <a href="#graphql-query-options">queries</a> and <a href="#graphql-mutation-options">mutations</a>.</p>
<p>You can define <code>config.options</code> as a plain object, or you can compute your options from a function that takes the component’s props as an argument.</p>
<p><strong>Example:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123;</div><div class="line">  <span class="attr">options</span>: &#123;</div><div class="line">    <span class="comment">// Options go here.</span></div><div class="line">  &#125;,</div><div class="line">&#125;)(MyComponent);</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123;</div><div class="line">  <span class="attr">options</span>: <span class="function">(<span class="params">props</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="comment">// Options are computed from `props` here.</span></div><div class="line">  &#125;),</div><div class="line">&#125;)(MyComponent);</div></pre></td></tr></table></figure>
<h3 id="graphql-config-props"><code>config.props</code></h3>

<p>The <code>config.props</code> property allows you to define a map function that takes your props including the props added by the <code>graphql()</code> function (<a href="#graphql-query-data"><code>props.data</code></a> for queries and <a href="#graphql-mutation-mutate"><code>props.mutate</code></a> for mutations) and allows you to compute a new props object that will be provided to the component that <code>graphql()</code> is wrapping.</p>
<p>The function you define behaves almost exactly like <a href="https://github.com/acdlite/recompose/blob/2e71fdf4270cc8022a6574aaf00731bfc25dcae6/docs/API.md#mapprops" target="_blank" rel="external"><code>mapProps</code> from Recompose</a> providing the same benefits without the need for another library.</p>
<p><code>config.props</code> is most useful when you want to abstract away complex functions calls into a simple prop that you can pass down to your component.</p>
<p>Another benefit of <code>config.props</code> is that it also allows you to decouple your pure UI components from your GraphQL and Apollo concerns. You can write your pure UI components in one file and then keep the logic required for them to interact with the store in a completely different place in your project. You can accomplish this by your pure UI components only asking for the props needed to render and <code>config.props</code> can contain the logic to provide exactly the props your pure component needs from the data provided by your GraphQL API.</p>
<p><strong>Example:</strong></p>
<p>This example uses <a href="#graphql-query-data-fetchMore"><code>props.data.fetchMore</code></a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123;</div><div class="line">  <span class="attr">props</span>: <span class="function">(<span class="params">&#123; data: &#123; fetchMore &#125; &#125;</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="attr">onLoadMore</span>: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      fetchMore(&#123; ... &#125;);</div><div class="line">    &#125;,</div><div class="line">  &#125;),</div><div class="line">&#125;)(MyComponent);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">&#123; onLoadMore &#125;</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    &lt;button onClick=&#123;onLoadMore&#125;&gt;</div><div class="line">      Load More!</div><div class="line">    &lt;/button&gt;</div><div class="line">  );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="graphql-config-skip"><code>config.skip</code></h3>

<p>If <code>config.skip</code> is true then all of the React Apollo code will be skipped <em>entirely</em>. It will be as if the <code>graphql()</code> function were a simple identity function. Your component will behave as if the <code>graphql()</code> function were not there at all.</p>
<p>Instead of passing a boolean to <code>config.skip</code>, you may also pass a function to <code>config.skip</code>. The function will take your components props and should return a boolean. If the boolean returns true then the skip behavior will go into effect.</p>
<p><code>config.skip</code> is especially useful if you want to use a different query based on some prop. You can see this in an example below.</p>
<p><strong>Example:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123;</div><div class="line">  <span class="attr">skip</span>: <span class="function"><span class="params">props</span> =&gt;</span> !!props.skip,</div><div class="line">&#125;)(MyComponent);</div></pre></td></tr></table></figure>
<p>The following example uses the <a href="#compose"><code>compose()</code></a> function to use multiple <code>graphql()</code> enhancers at once.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> compose(</div><div class="line">  graphql(gql<span class="string">`query MyQuery1 &#123; ... &#125;`</span>, &#123; <span class="attr">skip</span>: <span class="function"><span class="params">props</span> =&gt;</span> !props.useQuery1 &#125;),</div><div class="line">  graphql(gql<span class="string">`query MyQuery2 &#123; ... &#125;`</span>, &#123; <span class="attr">skip</span>: <span class="function"><span class="params">props</span> =&gt;</span> props.useQuery1 &#125;),</div><div class="line">)(MyComponent);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">&#123; data &#125;</span>) </span>&#123;</div><div class="line">  <span class="comment">// The data may be from `MyQuery1` or `MyQuery2` depending on the value</span></div><div class="line">  <span class="comment">// of the prop `useQuery1`.</span></div><div class="line">  <span class="built_in">console</span>.log(data);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="graphql-config-name"><code>config.name</code></h3>

<p>This property allows you to configure the name of the prop that gets passed down to your component. By default if the GraphQL document you pass into <code>graphql()</code> is a query then your prop will be named <a href="#graphql-query-data"><code>data</code></a>. If you pass a mutation then your prop will be named <a href="#graphql-mutation-mutate"><code>mutate</code></a>. While appropriate these default names collide when you are trying to use multiple queries or mutations with the same component. To avoid collisions you may use <code>config.name</code> to provide the prop from each query or mutation HOC a new name.</p>
<p><strong>Example:</strong></p>
<p>This example uses the <a href="#compose"><code>compose</code></a> function to use multiple <code>graphql()</code> HOCs together.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> compose(</div><div class="line">  graphql(gql<span class="string">`mutation (...) &#123; ... &#125;`</span>, &#123; <span class="attr">name</span>: <span class="string">'createTodo'</span> &#125;),</div><div class="line">  graphql(gql<span class="string">`mutation (...) &#123; ... &#125;`</span>, &#123; <span class="attr">name</span>: <span class="string">'updateTodo'</span> &#125;),</div><div class="line">  graphql(gql<span class="string">`mutation (...) &#123; ... &#125;`</span>, &#123; <span class="attr">name</span>: <span class="string">'deleteTodo'</span> &#125;),</div><div class="line">)(MyComponent);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">props</span>) </span>&#123;</div><div class="line">  <span class="comment">// Instead of the default prop name, `mutate`,</span></div><div class="line">  <span class="comment">// we have three different prop names.</span></div><div class="line">  <span class="built_in">console</span>.log(props.createTodo);</div><div class="line">  <span class="built_in">console</span>.log(props.updateTodo);</div><div class="line">  <span class="built_in">console</span>.log(props.deleteTodo);</div><div class="line"></div><div class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="graphql-config-withRef"><code>config.withRef</code></h3>

<p>By setting <code>config.withRef</code> to true you will be able to get the instance of your wrapped component from your higher-order GraphQL component using a <code>getWrappedInstance</code> method available on the instance of your higher-order GraphQL component.</p>
<p>You may want to set this to true when you want to call functions or get access to properties that are defined on your wrapped component’s class instance.</p>
<p>Below you can see an example of this behavior.</p>
<p><strong>Example:</strong></p>
<p>This example uses the <a href="https://facebook.github.io/react/docs/refs-and-the-dom.html" target="_blank" rel="external">React <code>ref</code> feature</a>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  saySomething() &#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Hello, world!'</span>);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> MyGraphQLComponent = graphql(</div><div class="line">  gql<span class="string">`&#123; ... &#125;`</span>,</div><div class="line">  &#123; <span class="attr">withRef</span>: <span class="literal">true</span> &#125;,</div><div class="line">)(MyComponent);</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyContainerComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;MyGraphQLComponent</div><div class="line">        ref=&#123;component =&gt; &#123;</div><div class="line">          assert(component.getWrappedInstance() instanceof MyComponent);</div><div class="line">          // We can call methods on the component class instance.</div><div class="line">          component.saySomething();</div><div class="line">        &#125;&#125;</div><div class="line">      /&gt;</div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="graphql-config-alias"><code>config.alias</code></h3>

<p>By default the display name for React Apollo components is <code>Apollo(${WrappedComponent.displayName})</code>. This is a pattern used by most React libraries that make use of higher order components. However, it may get a little confusing when you are using more then one higher order components and you look at the <a href="https://camo.githubusercontent.com/42385f70ef638c48310ce01a675ceceb4d4b84a9/68747470733a2f2f64337676366c703535716a6171632e636c6f756466726f6e742e6e65742f6974656d732f30543361333532443366325330423049314e31662f53637265656e25323053686f74253230323031372d30312d3132253230617425323031362e33372e30302e706e673f582d436c6f75644170702d56697369746f722d49643d626536623231313261633434616130636135386432623562616265373336323626763d3236623964363434" target="_blank" rel="external">React Devtools</a>.</p>
<p>To configure the name of your higher order component wrapper, you may use the <code>config.alias</code> property. So for example, if you set <code>config.alias</code> to <code>&#39;withCurrentUser&#39;</code> your wrapper component display name would be <code>withCurrentUser(${WrappedComponent.displayName})</code> instead of <code>Apollo(${WrappedComponent.displayName})</code>.</p>
<p><strong>Example:</strong></p>
<p>This example uses the <a href="#compose"><code>compose</code></a> function to use multiple <code>graphql()</code> HOCs together.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> compose(</div><div class="line">  graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123; <span class="attr">alias</span>: <span class="string">'withCurrentUser'</span> &#125;),</div><div class="line">  graphql(gql<span class="string">`&#123; ... &#125;`</span>, &#123; <span class="attr">alias</span>: <span class="string">'withList'</span> &#125;),</div><div class="line">)(MyComponent);</div></pre></td></tr></table></figure>
<h2 id="compose" title="compose(...)"><code>compose(...enhancers)(component)</code></h2>

<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; compose &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span>;</div></pre></td></tr></table></figure>
<p>For utility purposes, <code>react-apollo</code> exports a <code>compose</code> function. Using this function you may cleanly use several component enhancers at once. Including multiple <a href="#graphql"><code>graphql()</code></a>, <a href="#withApollo"><code>withApollo()</code></a>, or <a href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" target="_blank" rel="external">Redux <code>connect()</code></a> enhancers. This should clean up your code when you use multiple enhancers. <a href="http://redux.js.org/" target="_blank" rel="external">Redux</a> also exports a <code>compose</code> function, and so does <a href="https://github.com/acdlite/recompose" target="_blank" rel="external">Recompose</a> so you may choose to use the function from whichever library feels most appropriate.</p>
<p>An important note is that <code>compose()</code> executes the last enhancer <em>first</em> and works its way backwards through the list of enhancers. To illustrate calling three functions like this: <code>funcC(funcB(funcA(component)))</code> is equivalent to calling <code>compose()</code> like this: <code>compose(funcC, funcB, funcA)(component)</code>. If this does not make sense to you consider using <a href="https://lodash.com/docs/4.17.4#flowRight" target="_blank" rel="external"><code>flowRight()</code> from Lodash</a> which otherwise has the same behavior.</p>
<p><strong>Example:</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> compose(</div><div class="line">  withApollo,</div><div class="line">  graphql(<span class="string">`query &#123; ... &#125;`</span>),</div><div class="line">  graphql(<span class="string">`mutation &#123; ... &#125;`</span>),</div><div class="line">  connect(...),</div><div class="line">)(MyComponent);</div></pre></td></tr></table></figure>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="api.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          API: General
        </a>
      
      
        <a class="link primary next"
          href="api-queries.html">
          <span class="subtitle-pagination">Next</span>
          API: graphql container with queries
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/apollographqlcn/react-docs-cn/tree/master/source/api-graphql.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/react-docs-cn/script/smooth-scroll.min.js"></script>
    <script src="/react-docs-cn/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     

      
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PNFDVBB');
      

      
        // Segment Tracking
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page()
        }}();
      

      // search box
      

        ['desktop', 'mobile'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      

      
    </script>
  </body>
</html>
